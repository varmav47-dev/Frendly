<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Frendly Chat</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="app">
    <h2>Frendly Chat ðŸ’¬</h2>

    <div id="status">Connecting...</div>

    <div id="chat"></div>

    <div class="input-box">
      <input type="text" id="msg" placeholder="Type message..." />
      <button onclick="sendMsg()">Send</button>
    </div>

    <button class="next" onclick="nextChat()">Next</button>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
  <script src="/socket.io/socket.io.js"></script>

<script>
  const socket = io();

  const status = document.querySelector(".status");
  const input = document.querySelector("input");
  const sendBtn = document.querySelector(".send");
  const box = document.querySelector(".chat-box");

  socket.on("waiting", () => {
    status.innerText = "Looking for stranger...";
  });

  socket.on("matched", () => {
    status.innerText = "Connected to stranger";
    box.innerHTML = "";
  });

  socket.on("message", (msg) => {
    const div = document.createElement("div");
    div.innerText = "Stranger: " + msg;
    box.appendChild(div);
  });

  sendBtn.onclick = () => {
    if (input.value !== "") {
      const div = document.createElement("div");
      div.innerText = "Me: " + input.value;
      box.appendChild(div);

      socket.emit("message", input.value);
      input.value = "";
    }
  };
    </script>
</body>
</html>
