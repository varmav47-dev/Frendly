<!DOCTYPE html>
<html>
<head>
  <title>Friendly Chat</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h2>Friendly Chat ðŸ’¬</h2>
  <div class="status">Connecting...</div>

  <div class="chat-box" id="chat"></div>

  <input type="text" id="msg" placeholder="Type message..." />
  <button class="send">Send</button>

  <script src="/socket.io/socket.io.js"></script>

  <script>
    const socket = io();

    const status = document.querySelector(".status");
    const chatBox = document.querySelector(".chat-box");
    const input = document.getElementById("msg");
    const sendBtn = document.querySelector(".send");

    socket.on("waiting", () => {
      status.innerText = "Looking for stranger...";
    });

    socket.on("matched", () => {
      status.innerText = "Connected to stranger";
      chatBox.innerHTML = "";
    });

    socket.on("message", (msg) => {
      const div = document.createElement("div");
      div.innerText = "Stranger: " + msg;
      chatBox.appendChild(div);
    });

    sendBtn.onclick = () => {
      if (input.value !== "") {
        const div = document.createElement("div");
        div.innerText = "Me: " + input.value;
        chatBox.appendChild(div);

        socket.emit("message", input.value);
        input.value = "";
      }
    };
  </script>

</body>
</html>
